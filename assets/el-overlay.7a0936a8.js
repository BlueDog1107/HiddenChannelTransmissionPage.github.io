import{aa as ee,ai as ue,aq as re,bj as K,N as ie,aF as de,J as q,bK as ce,a1 as oe,ae as Z,D as G,ah as fe,ad as me,bL as pe,af as ve,aH as j,av as P,aw as V,d as F,f as R,O as g,ag as ye,b9 as be,a6 as Ee,m as x,bM as Ce,q as z,o as O,e as U,g as _,n as T,u as o,t as ge,w as h,K as X,R as Te,b as we,Q as W,T as Se,aK as Me,S as te,bN as ke,bO as he,y as De,Z as Ae,bh as J,A as D,bP as Le,bQ as Oe,H as Ie,G as Be,bv as Q,I as Ne,bR as Re,U as $e,L as Ye,al as _e,bF as He,aT as ze,bk as je,bS as Ue,W as Ke}from"./index.501d7dbd.js";import{U as se}from"./event.19e4c5e3.js";import{g as Ge}from"./scroll.dd911b49.js";var H=(e=>(e[e.TEXT=1]="TEXT",e[e.CLASS=2]="CLASS",e[e.STYLE=4]="STYLE",e[e.PROPS=8]="PROPS",e[e.FULL_PROPS=16]="FULL_PROPS",e[e.HYDRATE_EVENTS=32]="HYDRATE_EVENTS",e[e.STABLE_FRAGMENT=64]="STABLE_FRAGMENT",e[e.KEYED_FRAGMENT=128]="KEYED_FRAGMENT",e[e.UNKEYED_FRAGMENT=256]="UNKEYED_FRAGMENT",e[e.NEED_PATCH=512]="NEED_PATCH",e[e.DYNAMIC_SLOTS=1024]="DYNAMIC_SLOTS",e[e.HOISTED=-1]="HOISTED",e[e.BAIL=-2]="BAIL",e))(H||{});const ne=Symbol("dialogInjectionKey"),Ve=(e,t,s)=>{let n={offsetX:0,offsetY:0};const u=r=>{const d=r.clientX,p=r.clientY,{offsetX:m,offsetY:v}=n,l=e.value.getBoundingClientRect(),f=l.left,w=l.top,I=l.width,B=l.height,A=document.documentElement.clientWidth,N=document.documentElement.clientHeight,L=-f+m,S=-w+v,M=A-f-I+m,b=N-w-B+v,k=y=>{const E=Math.min(Math.max(m+y.clientX-d,L),M),$=Math.min(Math.max(v+y.clientY-p,S),b);n={offsetX:E,offsetY:$},e.value.style.transform=`translate(${K(E)}, ${K($)})`},a=()=>{document.removeEventListener("mousemove",k),document.removeEventListener("mouseup",a)};document.addEventListener("mousemove",k),document.addEventListener("mouseup",a)},c=()=>{t.value&&e.value&&t.value.addEventListener("mousedown",u)},i=()=>{t.value&&e.value&&t.value.removeEventListener("mousedown",u)};ee(()=>{ue(()=>{s.value?c():i()})}),re(()=>{i()})},Xe=e=>{ie(e)||de("[useLockscreen]","You need to pass a ref param to this function");const t=q("popup"),s=ce(()=>t.bm("parent","hidden"));if(!oe||Z(document.body,s.value))return;let n=0,u=!1,c="0";const i=()=>{ve(document.body,s.value),u&&(document.body.style.width=c)};G(e,r=>{if(!r){i();return}u=!Z(document.body,s.value),u&&(c=document.body.style.width),n=Ge(t.namespace.value);const d=document.documentElement.clientHeight<document.body.scrollHeight,p=fe(document.body,"overflowY");n>0&&(d||p==="scroll")&&u&&(document.body.style.width=`calc(100% - ${n}px)`),me(document.body,s.value)}),pe(()=>i())},le=e=>{if(!e)return{onClick:j,onMousedown:j,onMouseup:j};let t=!1,s=!1;return{onClick:i=>{t&&s&&e(i),t=s=!1},onMousedown:i=>{t=i.target===i.currentTarget},onMouseup:i=>{s=i.target===i.currentTarget}}};var mo=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function po(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function vo(e){var t=e.default;if(typeof t=="function"){var s=function(){return t.apply(this,arguments)};s.prototype=t.prototype}else s={};return Object.defineProperty(s,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var u=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(s,n,u.get?u:{enumerable:!0,get:function(){return e[n]}})}),s}const We=P({mask:{type:Boolean,default:!0},customMaskEvent:{type:Boolean,default:!1},overlayClass:{type:V([String,Array,Object])},zIndex:{type:V([String,Number])}}),qe={click:e=>e instanceof MouseEvent};var Pe=F({name:"ElOverlay",props:We,emits:qe,setup(e,{slots:t,emit:s}){const n=q("overlay"),u=d=>{s("click",d)},{onClick:c,onMousedown:i,onMouseup:r}=le(e.customMaskEvent?void 0:u);return()=>e.mask?R("div",{class:[n.b(),e.overlayClass],style:{zIndex:e.zIndex},onClick:c,onMousedown:i,onMouseup:r},[g(t,"default")],H.STYLE|H.CLASS|H.PROPS,["onClick","onMouseup","onMousedown"]):ye("div",{class:e.overlayClass,style:{zIndex:e.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[g(t,"default")])}});const Fe=Pe,ae=P({center:{type:Boolean,default:!1},closeIcon:{type:be,default:""},customClass:{type:String,default:""},draggable:{type:Boolean,default:!1},fullscreen:{type:Boolean,default:!1},showClose:{type:Boolean,default:!0},title:{type:String,default:""}}),Ze={close:()=>!0},xe=["aria-label"],Je=["id"],Qe={name:"ElDialogContent"},eo=F({...Qe,props:ae,emits:Ze,setup(e){const t=e,{t:s}=Ee(),{Close:n}=ke,{dialogRef:u,headerRef:c,bodyId:i,ns:r,style:d}=x(ne),{focusTrapRef:p}=x(Ce),m=he(p,u),v=z(()=>t.draggable);return Ve(u,c,v),(l,f)=>(O(),U("div",{ref:o(m),class:T([o(r).b(),o(r).is("fullscreen",l.fullscreen),o(r).is("draggable",o(v)),{[o(r).m("center")]:l.center},l.customClass]),style:Se(o(d)),tabindex:"-1",onClick:f[1]||(f[1]=Me(()=>{},["stop"]))},[_("header",{ref_key:"headerRef",ref:c,class:T(o(r).e("header"))},[g(l.$slots,"header",{},()=>[_("span",{role:"heading",class:T(o(r).e("title"))},ge(l.title),3)]),l.showClose?(O(),U("button",{key:0,"aria-label":o(s)("el.dialog.close"),class:T(o(r).e("headerbtn")),type:"button",onClick:f[0]||(f[0]=w=>l.$emit("close"))},[R(o(we),{class:T(o(r).e("close"))},{default:h(()=>[(O(),X(Te(l.closeIcon||o(n))))]),_:1},8,["class"])],10,xe)):W("v-if",!0)],2),_("div",{id:o(i),class:T(o(r).e("body"))},[g(l.$slots,"default")],10,Je),l.$slots.footer?(O(),U("footer",{key:0,class:T(o(r).e("footer"))},[g(l.$slots,"footer")],2)):W("v-if",!0)],6))}});var oo=te(eo,[["__file","/home/runner/work/element-plus/element-plus/packages/components/dialog/src/dialog-content.vue"]]);const to=P({...ae,appendToBody:{type:Boolean,default:!1},beforeClose:{type:V(Function)},destroyOnClose:{type:Boolean,default:!1},closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},modal:{type:Boolean,default:!0},openDelay:{type:Number,default:0},closeDelay:{type:Number,default:0},top:{type:String},modelValue:{type:Boolean,default:!1},modalClass:String,width:{type:[String,Number]},zIndex:{type:Number},trapFocus:{type:Boolean,default:!1}}),so={open:()=>!0,opened:()=>!0,close:()=>!0,closed:()=>!0,[se]:e=>De(e),openAutoFocus:()=>!0,closeAutoFocus:()=>!0},no=(e,t)=>{const n=Be().emit,{nextZIndex:u}=Ae();let c="";const i=J(),r=J(),d=D(!1),p=D(!1),m=D(!1),v=D(e.zIndex||u());let l,f;const w=Le("namespace",Oe),I=z(()=>{const C={},Y=`--${w.value}-dialog`;return e.fullscreen||(e.top&&(C[`${Y}-margin-top`]=e.top),e.width&&(C[`${Y}-width`]=K(e.width))),C});function B(){n("opened")}function A(){n("closed"),n(se,!1),e.destroyOnClose&&(m.value=!1)}function N(){n("close")}function L(){f==null||f(),l==null||l(),e.openDelay&&e.openDelay>0?{stop:l}=Q(()=>k(),e.openDelay):k()}function S(){l==null||l(),f==null||f(),e.closeDelay&&e.closeDelay>0?{stop:f}=Q(()=>a(),e.closeDelay):a()}function M(){function C(Y){Y||(p.value=!0,d.value=!1)}e.beforeClose?e.beforeClose(C):S()}function b(){e.closeOnClickModal&&M()}function k(){!oe||(d.value=!0)}function a(){d.value=!1}function y(){n("openAutoFocus")}function E(){n("closeAutoFocus")}e.lockScroll&&Xe(d);function $(){e.closeOnPressEscape&&M()}return G(()=>e.modelValue,C=>{C?(p.value=!1,L(),m.value=!0,v.value=e.zIndex?v.value++:u(),Ie(()=>{n("open"),t.value&&(t.value.scrollTop=0)})):d.value&&S()}),G(()=>e.fullscreen,C=>{!t.value||(C?(c=t.value.style.transform,t.value.style.transform=""):t.value.style.transform=c)}),ee(()=>{e.modelValue&&(d.value=!0,m.value=!0,L())}),{afterEnter:B,afterLeave:A,beforeLeave:N,handleClose:M,onModalClick:b,close:S,doClose:a,onOpenAutoFocus:y,onCloseAutoFocus:E,onCloseRequested:$,titleId:i,bodyId:r,closed:p,style:I,rendered:m,visible:d,zIndex:v}},lo=["aria-label","aria-labelledby","aria-describedby"],ao={name:"ElDialog"},uo=F({...ao,props:to,emits:so,setup(e,{expose:t}){const s=e,n=Ne();Re({scope:"el-dialog",from:"the title slot",replacement:"the header slot",version:"3.0.0",ref:"https://element-plus.org/en-US/component/dialog.html#slots"},z(()=>!!n.title));const u=q("dialog"),c=D(),i=D(),r=D(),{visible:d,titleId:p,bodyId:m,style:v,rendered:l,zIndex:f,afterEnter:w,afterLeave:I,beforeLeave:B,handleClose:A,onModalClick:N,onOpenAutoFocus:L,onCloseAutoFocus:S,onCloseRequested:M}=no(s,c);$e(ne,{dialogRef:c,headerRef:i,bodyId:m,ns:u,rendered:l,style:v});const b=le(N),k=z(()=>s.draggable&&!s.fullscreen);return t({visible:d,dialogContentRef:r}),(a,y)=>(O(),X(Ue,{to:"body",disabled:!a.appendToBody},[R(je,{name:"dialog-fade",onAfterEnter:o(w),onAfterLeave:o(I),onBeforeLeave:o(B),persisted:""},{default:h(()=>[Ye(R(o(Fe),{"custom-mask-event":"",mask:a.modal,"overlay-class":a.modalClass,"z-index":o(f)},{default:h(()=>[_("div",{role:"dialog","aria-modal":"true","aria-label":a.title||void 0,"aria-labelledby":a.title?void 0:o(p),"aria-describedby":o(m),class:T(`${o(u).namespace.value}-overlay-dialog`),onClick:y[0]||(y[0]=(...E)=>o(b).onClick&&o(b).onClick(...E)),onMousedown:y[1]||(y[1]=(...E)=>o(b).onMousedown&&o(b).onMousedown(...E)),onMouseup:y[2]||(y[2]=(...E)=>o(b).onMouseup&&o(b).onMouseup(...E))},[R(o(He),{loop:"",trapped:o(d),"focus-start-el":"container",onFocusAfterTrapped:o(L),onFocusAfterReleased:o(S),onReleaseRequested:o(M)},{default:h(()=>[o(l)?(O(),X(oo,{key:0,ref_key:"dialogContentRef",ref:r,"custom-class":a.customClass,center:a.center,"close-icon":a.closeIcon,draggable:o(k),fullscreen:a.fullscreen,"show-close":a.showClose,title:a.title,onClose:o(A)},ze({header:h(()=>[a.$slots.title?g(a.$slots,"title",{key:1}):g(a.$slots,"header",{key:0,close:o(A),titleId:o(p),titleClass:o(u).e("title")})]),default:h(()=>[g(a.$slots,"default")]),_:2},[a.$slots.footer?{name:"footer",fn:h(()=>[g(a.$slots,"footer")])}:void 0]),1032,["custom-class","center","close-icon","draggable","fullscreen","show-close","title","onClose"])):W("v-if",!0)]),_:3},8,["trapped","onFocusAfterTrapped","onFocusAfterReleased","onReleaseRequested"])],42,lo)]),_:3},8,["mask","overlay-class","z-index"]),[[_e,o(d)]])]),_:3},8,["onAfterEnter","onAfterLeave","onBeforeLeave"])],8,["disabled"]))}});var ro=te(uo,[["__file","/home/runner/work/element-plus/element-plus/packages/components/dialog/src/dialog.vue"]]);const yo=Ke(ro);export{Fe as E,Xe as a,le as b,yo as c,vo as d,mo as e,po as g,Ve as u};
