import{aF as Ql,aG as Il,av as ye,S as ne,d as X,B as Pl,J as Q,q as F,o as y,e as I,g as R,O as B,n as h,u,K as P,w as S,f as L,aD as il,aH as z,b as _,Q as T,T as te,aI as Rl,W as cl,m as $e,aJ as ze,a0 as G,D as j,G as pl,r as Le,V as fl,aq as Vl,H as K,L as we,al as vl,t as x,A as N,aa as ml,ak as Bl,a6 as Ae,aK as Ee,l as Gl,F as Dl,aL as ke,a1 as Xl,aM as sl,ay as Cl,aN as Jl,a2 as Yl,a3 as Zl,aO as _l,aB as xl,a5 as et,U as gl,a as re,a7 as lt,P as qe,a8 as rl,aP as W,aQ as tt,aR as ul,R as Sl,X as Ml,aS as bl,aT as nt,aw as V,ax as dl,aU as q,aV as ot,aA as at,aC as st,aW as it,aX as rt,aY as ut,z as dt,aZ as ct,a_ as pt,I as ft,a$ as vt,b0 as mt,b1 as Ol,c as gt,h as yl,p as bt,j as yt,_ as ht}from"./index.23dd7e77.js";import{i as kl,a as Ct,E as ql,b as St,c as Ot}from"./el-form-item.cc86d35e.js";import{E as kt}from"./el-progress.f04a0b0c.js";import{d as wl,C as wt}from"./el-tag.8a8da26c.js";import{U as ue,C as zl}from"./event.19e4c5e3.js";import{s as $t}from"./scroll.39da4c8b.js";import{E as Et}from"./index.51d76640.js";const Lt=(e="")=>e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d"),Tt=e=>Ql[e||"default"],Ft=e=>["",...Il].includes(e),Al=Symbol("uploadContextKey"),It=e=>({focus:()=>{var l,o;(o=(l=e.value)==null?void 0:l.focus)==null||o.call(l)}}),Ul=ye({closable:Boolean,type:{type:String,values:["success","info","warning","danger",""],default:""},hit:Boolean,disableTransitions:Boolean,color:{type:String,default:""},size:{type:String,values:Il,default:""},effect:{type:String,values:["dark","light","plain"],default:"light"},round:Boolean}),Pt={close:e=>e instanceof MouseEvent,click:e=>e instanceof MouseEvent},Rt={name:"ElTag"},Vt=X({...Rt,props:Ul,emits:Pt,setup(e,{emit:l}){const o=e,f=Pl(),i=Q("tag"),p=F(()=>{const{type:v,hit:w,effect:c,closable:k,round:r}=o;return[i.b(),i.is("closable",k),i.m(v),i.m(f.value),i.m(c),i.is("hit",w),i.is("round",r)]}),d=v=>{l("close",v)},g=v=>{l("click",v)};return(v,w)=>v.disableTransitions?(y(),I("span",{key:0,class:h(u(p)),style:te({backgroundColor:v.color}),onClick:g},[R("span",{class:h(u(i).e("content"))},[B(v.$slots,"default")],2),v.closable?(y(),P(u(_),{key:0,class:h(u(i).e("close")),onClick:z(d,["stop"])},{default:S(()=>[L(u(il))]),_:1},8,["class","onClick"])):T("v-if",!0)],6)):(y(),P(Rl,{key:1,name:`${u(i).namespace.value}-zoom-in-center`,appear:""},{default:S(()=>[R("span",{class:h(u(p)),style:te({backgroundColor:v.color}),onClick:g},[R("span",{class:h(u(i).e("content"))},[B(v.$slots,"default")],2),v.closable?(y(),P(u(_),{key:0,class:h(u(i).e("close")),onClick:z(d,["stop"])},{default:S(()=>[L(u(il))]),_:1},8,["class","onClick"])):T("v-if",!0)],6)]),_:3},8,["name"]))}});var Bt=ne(Vt,[["__file","/home/runner/work/element-plus/element-plus/packages/components/tag/src/tag.vue"]]);const Dt=cl(Bt),Kl="ElSelectGroup",Ue="ElSelect";function Mt(e,l){const o=$e(Ue),f=$e(Kl,{disabled:!1}),i=F(()=>Object.prototype.toString.call(e.value).toLowerCase()==="[object object]"),p=F(()=>o.props.multiple?k(o.props.modelValue,e.value):r(e.value,o.props.modelValue)),d=F(()=>{if(o.props.multiple){const m=o.props.modelValue||[];return!p.value&&m.length>=o.props.multipleLimit&&o.props.multipleLimit>0}else return!1}),g=F(()=>e.label||(i.value?"":e.value)),v=F(()=>e.value||e.label||""),w=F(()=>e.disabled||l.groupDisabled||d.value),c=pl(),k=(m=[],O)=>{if(i.value){const b=o.props.valueKey;return m&&m.some($=>ze(G($,b))===G(O,b))}else return m&&m.includes(O)},r=(m,O)=>{if(i.value){const{valueKey:b}=o.props;return G(m,b)===G(O,b)}else return m===O},a=()=>{!e.disabled&&!f.disabled&&(o.hoverIndex=o.optionsArray.indexOf(c.proxy))};j(()=>g.value,()=>{!e.created&&!o.props.remote&&o.setSelected()}),j(()=>e.value,(m,O)=>{const{remote:b,valueKey:$}=o.props;if(!e.created&&!b){if($&&typeof m=="object"&&typeof O=="object"&&m[$]===O[$])return;o.setSelected()}}),j(()=>f.disabled,()=>{l.groupDisabled=f.disabled},{immediate:!0});const{queryChange:n}=ze(o);return j(n,m=>{const{query:O}=u(m),b=new RegExp(Lt(O),"i");l.visible=b.test(g.value)||e.created,l.visible||o.filteredOptionsCount--}),{select:o,currentLabel:g,currentValue:v,itemSelected:p,isDisabled:w,hoverItem:a}}const qt=X({name:"ElOption",componentName:"ElOption",props:{value:{required:!0,type:[String,Number,Boolean,Object]},label:[String,Number],created:Boolean,disabled:{type:Boolean,default:!1}},setup(e){const l=Q("select"),o=Le({index:-1,groupDisabled:!1,visible:!0,hitState:!1,hover:!1}),{currentLabel:f,itemSelected:i,isDisabled:p,select:d,hoverItem:g}=Mt(e,o),{visible:v,hover:w}=fl(o),c=pl().proxy,k=c.value;d.onOptionCreate(c),Vl(()=>{const{selected:a}=d,m=(d.props.multiple?a:[a]).some(O=>O.value===c.value);K(()=>{d.cachedOptions.get(k)===c&&!m&&d.cachedOptions.delete(k)}),d.onOptionDestroy(k,c)});function r(){e.disabled!==!0&&o.groupDisabled!==!0&&d.handleOptionSelect(c,!0)}return{ns:l,currentLabel:f,itemSelected:i,isDisabled:p,select:d,hoverItem:g,visible:v,hover:w,selectOptionClick:r,states:o}}});function zt(e,l,o,f,i,p){return we((y(),I("li",{class:h([e.ns.be("dropdown","item"),e.ns.is("disabled",e.isDisabled),{selected:e.itemSelected,hover:e.hover}]),onMouseenter:l[0]||(l[0]=(...d)=>e.hoverItem&&e.hoverItem(...d)),onClick:l[1]||(l[1]=z((...d)=>e.selectOptionClick&&e.selectOptionClick(...d),["stop"]))},[B(e.$slots,"default",{},()=>[R("span",null,x(e.currentLabel),1)])],34)),[[vl,e.visible]])}var hl=ne(qt,[["render",zt],["__file","/home/runner/work/element-plus/element-plus/packages/components/select/src/option.vue"]]);const At=X({name:"ElSelectDropdown",componentName:"ElSelectDropdown",setup(){const e=$e(Ue),l=Q("select"),o=F(()=>e.props.popperClass),f=F(()=>e.props.multiple),i=F(()=>e.props.fitInputWidth),p=N("");function d(){var g;p.value=`${(g=e.selectWrapper)==null?void 0:g.offsetWidth}px`}return ml(()=>{d(),Bl(e.selectWrapper,d)}),{ns:l,minWidth:p,popperClass:o,isMultiple:f,isFitInputWidth:i}}});function Ut(e,l,o,f,i,p){return y(),I("div",{class:h([e.ns.b("dropdown"),e.ns.is("multiple",e.isMultiple),e.popperClass]),style:te({[e.isFitInputWidth?"width":"minWidth"]:e.minWidth})},[B(e.$slots,"default")],6)}var Kt=ne(At,[["render",Ut],["__file","/home/runner/work/element-plus/element-plus/packages/components/select/src/select-dropdown.vue"]]);function Wt(e){const{t:l}=Ae();return Le({options:new Map,cachedOptions:new Map,createdLabel:null,createdSelected:!1,selected:e.multiple?[]:{},inputLength:20,inputWidth:0,optionsCount:0,filteredOptionsCount:0,visible:!1,softFocus:!1,selectedLabel:"",hoverIndex:-1,query:"",previousQuery:null,inputHovering:!1,cachedPlaceHolder:"",currentPlaceholder:l("el.select.placeholder"),menuVisibleOnFocus:!1,isOnComposition:!1,isSilentBlur:!1,prefixWidth:11,tagInMultiLine:!1})}const Nt=(e,l,o)=>{const{t:f}=Ae(),i=Q("select"),p=N(null),d=N(null),g=N(null),v=N(null),w=N(null),c=N(null),k=N(-1),r=Ee({query:""}),a=Ee(""),{form:n,formItem:m}=Gl(),O=F(()=>!e.filterable||e.multiple||!l.visible),b=F(()=>e.disabled||(n==null?void 0:n.disabled)),$=F(()=>{const t=e.multiple?Array.isArray(e.modelValue)&&e.modelValue.length>0:e.modelValue!==void 0&&e.modelValue!==null&&e.modelValue!=="";return e.clearable&&!b.value&&l.inputHovering&&t}),A=F(()=>e.remote&&e.filterable?"":e.suffixIcon),de=F(()=>i.is("reverse",A.value&&l.visible)),J=F(()=>e.remote?300:0),ce=F(()=>e.loading?e.loadingText||f("el.select.loading"):e.remote&&l.query===""&&l.options.size===0?!1:e.filterable&&l.query&&l.options.size>0&&l.filteredOptionsCount===0?e.noMatchText||f("el.select.noMatch"):l.options.size===0?e.noDataText||f("el.select.noData"):null),D=F(()=>Array.from(l.options.values())),pe=F(()=>Array.from(l.cachedOptions.values())),fe=F(()=>{const t=D.value.filter(s=>!s.created).some(s=>s.currentLabel===l.query);return e.filterable&&e.allowCreate&&l.query!==""&&!t}),Y=Pl(),ee=F(()=>["small"].includes(Y.value)?"small":"default"),Ke=F({get(){return l.visible&&ce.value!==!1},set(t){l.visible=t}});j([()=>b.value,()=>Y.value,()=>n==null?void 0:n.size],()=>{K(()=>{Z()})}),j(()=>e.placeholder,t=>{l.cachedPlaceHolder=l.currentPlaceholder=t}),j(()=>e.modelValue,(t,s)=>{e.multiple&&(Z(),t&&t.length>0||d.value&&l.query!==""?l.currentPlaceholder="":l.currentPlaceholder=l.cachedPlaceHolder,e.filterable&&!e.reserveKeyword&&(l.query="",oe(l.query))),he(),e.filterable&&!e.multiple&&(l.inputLength=20),!kl(t,s)&&e.validateEvent&&(m==null||m.validate("change").catch(C=>Dl()))},{flush:"post",deep:!0}),j(()=>l.visible,t=>{var s,C,E;t?((C=(s=g.value)==null?void 0:s.updatePopper)==null||C.call(s),e.filterable&&(l.filteredOptionsCount=l.optionsCount,l.query=e.remote?"":l.selectedLabel,e.multiple?(E=d.value)==null||E.focus():l.selectedLabel&&(l.currentPlaceholder=`${l.selectedLabel}`,l.selectedLabel=""),oe(l.query),!e.multiple&&!e.remote&&(r.value.query="",ke(r),ke(a)))):(d.value&&d.value.blur(),l.query="",l.previousQuery=null,l.selectedLabel="",l.inputLength=20,l.menuVisibleOnFocus=!1,We(),K(()=>{d.value&&d.value.value===""&&l.selected.length===0&&(l.currentPlaceholder=l.cachedPlaceHolder)}),e.multiple||(l.selected&&(e.filterable&&e.allowCreate&&l.createdSelected&&l.createdLabel?l.selectedLabel=l.createdLabel:l.selectedLabel=l.selected.currentLabel,e.filterable&&(l.query=l.selectedLabel)),e.filterable&&(l.currentPlaceholder=l.cachedPlaceHolder))),o.emit("visible-change",t)}),j(()=>l.options.entries(),()=>{var t,s,C;if(!Xl)return;(s=(t=g.value)==null?void 0:t.updatePopper)==null||s.call(t),e.multiple&&Z();const E=((C=w.value)==null?void 0:C.querySelectorAll("input"))||[];Array.from(E).includes(document.activeElement)||he(),e.defaultFirstOption&&(e.filterable||e.remote)&&l.filteredOptionsCount&&Fe()},{flush:"post"}),j(()=>l.hoverIndex,t=>{typeof t=="number"&&t>-1&&(k.value=D.value[t]||{}),D.value.forEach(s=>{s.hover=k.value===s})});const Z=()=>{e.collapseTags&&!e.filterable||K(()=>{var t,s;if(!p.value)return;const C=p.value.$el.querySelector("input"),E=v.value,M=Tt(Y.value||(n==null?void 0:n.size));C.style.height=`${(l.selected.length===0?M:Math.max(E?E.clientHeight+(E.clientHeight>M?6:0):0,M))-2}px`,l.tagInMultiLine=Number.parseFloat(C.style.height)>=M,l.visible&&ce.value!==!1&&((s=(t=g.value)==null?void 0:t.updatePopper)==null||s.call(t))})},oe=t=>{if(!(l.previousQuery===t||l.isOnComposition)){if(l.previousQuery===null&&(typeof e.filterMethod=="function"||typeof e.remoteMethod=="function")){l.previousQuery=t;return}l.previousQuery=t,K(()=>{var s,C;l.visible&&((C=(s=g.value)==null?void 0:s.updatePopper)==null||C.call(s))}),l.hoverIndex=-1,e.multiple&&e.filterable&&K(()=>{const s=d.value.value.length*15+20;l.inputLength=e.collapseTags?Math.min(50,s):s,Te(),Z()}),e.remote&&typeof e.remoteMethod=="function"?(l.hoverIndex=-1,e.remoteMethod(t)):typeof e.filterMethod=="function"?(e.filterMethod(t),ke(a)):(l.filteredOptionsCount=l.optionsCount,r.value.query=t,ke(r),ke(a)),e.defaultFirstOption&&(e.filterable||e.remote)&&l.filteredOptionsCount&&Fe()}},Te=()=>{l.currentPlaceholder!==""&&(l.currentPlaceholder=d.value.value?"":l.cachedPlaceHolder)},Fe=()=>{const t=D.value.filter(E=>E.visible&&!E.disabled&&!E.states.groupDisabled),s=t.find(E=>E.created),C=t[0];l.hoverIndex=Ce(D.value,s||C)},he=()=>{var t;if(e.multiple)l.selectedLabel="";else{const C=Ie(e.modelValue);(t=C.props)!=null&&t.created?(l.createdLabel=C.props.value,l.createdSelected=!0):l.createdSelected=!1,l.selectedLabel=C.currentLabel,l.selected=C,e.filterable&&(l.query=l.selectedLabel);return}const s=[];Array.isArray(e.modelValue)&&e.modelValue.forEach(C=>{s.push(Ie(C))}),l.selected=s,K(()=>{Z()})},Ie=t=>{let s;const C=sl(t).toLowerCase()==="object",E=sl(t).toLowerCase()==="null",M=sl(t).toLowerCase()==="undefined";for(let le=l.cachedOptions.size-1;le>=0;le--){const H=pe.value[le];if(C?G(H.value,e.valueKey)===G(t,e.valueKey):H.value===t){s={value:t,currentLabel:H.currentLabel,isDisabled:H.isDisabled};break}}if(s)return s;const se=C?t.label:!E&&!M?t:"",ie={value:t,currentLabel:se};return e.multiple&&(ie.hitState=!1),ie},We=()=>{setTimeout(()=>{const t=e.valueKey;e.multiple?l.selected.length>0?l.hoverIndex=Math.min.apply(null,l.selected.map(s=>D.value.findIndex(C=>G(C,t)===G(s,t)))):l.hoverIndex=-1:l.hoverIndex=D.value.findIndex(s=>ge(s)===ge(l.selected))},300)},Ne=()=>{var t,s;je(),(s=(t=g.value)==null?void 0:t.updatePopper)==null||s.call(t),e.multiple&&!e.filterable&&Z()},je=()=>{var t;l.inputWidth=(t=p.value)==null?void 0:t.$el.getBoundingClientRect().width},He=()=>{e.filterable&&l.query!==l.selectedLabel&&(l.query=l.selectedLabel,oe(l.query))},Qe=wl(()=>{He()},J.value),Ge=wl(t=>{oe(t.target.value)},J.value),ve=t=>{kl(e.modelValue,t)||o.emit(zl,t)},Xe=t=>{if(t.target.value.length<=0&&!Se()){const s=e.modelValue.slice();s.pop(),o.emit(ue,s),ve(s)}t.target.value.length===1&&e.modelValue.length===0&&(l.currentPlaceholder=l.cachedPlaceHolder)},Je=(t,s)=>{const C=l.selected.indexOf(s);if(C>-1&&!b.value){const E=e.modelValue.slice();E.splice(C,1),o.emit(ue,E),ve(E),o.emit("remove-tag",s.value)}t.stopPropagation()},me=t=>{t.stopPropagation();const s=e.multiple?[]:"";if(typeof s!="string")for(const C of l.selected)C.isDisabled&&s.push(C.value);o.emit(ue,s),ve(s),l.visible=!1,o.emit("clear")},Pe=(t,s)=>{var C;if(e.multiple){const E=(e.modelValue||[]).slice(),M=Ce(E,t.value);M>-1?E.splice(M,1):(e.multipleLimit<=0||E.length<e.multipleLimit)&&E.push(t.value),o.emit(ue,E),ve(E),t.created&&(l.query="",oe(""),l.inputLength=20),e.filterable&&((C=d.value)==null||C.focus())}else o.emit(ue,t.value),ve(t.value),l.visible=!1;l.isSilentBlur=s,Ye(),!l.visible&&K(()=>{ae(t)})},Ce=(t=[],s)=>{if(!Cl(s))return t.indexOf(s);const C=e.valueKey;let E=-1;return t.some((M,se)=>ze(G(M,C))===G(s,C)?(E=se,!0):!1),E},Ye=()=>{l.softFocus=!0;const t=d.value||p.value;t&&(t==null||t.focus())},ae=t=>{var s,C,E,M,se;const ie=Array.isArray(t)?t[0]:t;let le=null;if(ie!=null&&ie.value){const H=D.value.filter(U=>U.value===ie.value);H.length>0&&(le=H[0].$el)}if(g.value&&le){const H=(M=(E=(C=(s=g.value)==null?void 0:s.popperRef)==null?void 0:C.contentRef)==null?void 0:E.querySelector)==null?void 0:M.call(E,`.${i.be("dropdown","wrap")}`);H&&$t(H,le)}(se=c.value)==null||se.handleScroll()},Ze=t=>{l.optionsCount++,l.filteredOptionsCount++,l.options.set(t.value,t),l.cachedOptions.set(t.value,t)},_e=(t,s)=>{l.options.get(t)===s&&(l.optionsCount--,l.filteredOptionsCount--,l.options.delete(t))},xe=t=>{t.code!==Jl.backspace&&Se(!1),l.inputLength=d.value.value.length*15+20,Z()},Se=t=>{if(!Array.isArray(l.selected))return;const s=l.selected[l.selected.length-1];if(!!s)return t===!0||t===!1?(s.hitState=t,t):(s.hitState=!s.hitState,s.hitState)},Oe=t=>{const s=t.target.value;if(t.type==="compositionend")l.isOnComposition=!1,K(()=>oe(s));else{const C=s[s.length-1]||"";l.isOnComposition=!Ct(C)}},Re=()=>{K(()=>ae(l.selected))},el=t=>{l.softFocus?l.softFocus=!1:((e.automaticDropdown||e.filterable)&&(e.filterable&&!l.visible&&(l.menuVisibleOnFocus=!0),l.visible=!0),o.emit("focus",t))},Ve=()=>{var t;l.visible=!1,(t=p.value)==null||t.blur()},ll=t=>{K(()=>{l.isSilentBlur?l.isSilentBlur=!1:o.emit("blur",t)}),l.softFocus=!1},tl=t=>{me(t)},nl=()=>{l.visible=!1},Be=t=>{l.visible&&(t.preventDefault(),t.stopPropagation(),l.visible=!1)},De=()=>{var t;b.value||(l.menuVisibleOnFocus?l.menuVisibleOnFocus=!1:l.visible=!l.visible,l.visible&&((t=d.value||p.value)==null||t.focus()))},ol=()=>{l.visible?D.value[l.hoverIndex]&&Pe(D.value[l.hoverIndex],void 0):De()},ge=t=>Cl(t.value)?G(t.value,e.valueKey):t.value,al=F(()=>D.value.filter(t=>t.visible).every(t=>t.disabled)),Me=t=>{if(!l.visible){l.visible=!0;return}if(!(l.options.size===0||l.filteredOptionsCount===0)&&!l.isOnComposition&&!al.value){t==="next"?(l.hoverIndex++,l.hoverIndex===l.options.size&&(l.hoverIndex=0)):t==="prev"&&(l.hoverIndex--,l.hoverIndex<0&&(l.hoverIndex=l.options.size-1));const s=D.value[l.hoverIndex];(s.disabled===!0||s.states.groupDisabled===!0||!s.visible)&&Me(t),K(()=>ae(k.value))}};return{optionsArray:D,selectSize:Y,handleResize:Ne,debouncedOnInputChange:Qe,debouncedQueryChange:Ge,deletePrevTag:Xe,deleteTag:Je,deleteSelected:me,handleOptionSelect:Pe,scrollToOption:ae,readonly:O,resetInputHeight:Z,showClose:$,iconComponent:A,iconReverse:de,showNewOption:fe,collapseTagSize:ee,setSelected:he,managePlaceholder:Te,selectDisabled:b,emptyText:ce,toggleLastOptionHitState:Se,resetInputState:xe,handleComposition:Oe,onOptionCreate:Ze,onOptionDestroy:_e,handleMenuEnter:Re,handleFocus:el,blur:Ve,handleBlur:ll,handleClearClick:tl,handleClose:nl,handleKeydownEscape:Be,toggleMenu:De,selectOption:ol,getValueKey:ge,navigateOptions:Me,dropMenuVisible:Ke,queryChange:r,groupQueryChange:a,reference:p,input:d,tooltipRef:g,tags:v,selectWrapper:w,scrollbar:c}},$l="ElSelect",jt=X({name:$l,componentName:$l,components:{ElInput:ql,ElSelectMenu:Kt,ElOption:hl,ElTag:Dt,ElScrollbar:Yl,ElTooltip:Zl,ElIcon:_},directives:{ClickOutside:wt},props:{name:String,id:String,modelValue:{type:[Array,String,Number,Boolean,Object],default:void 0},autocomplete:{type:String,default:"off"},automaticDropdown:Boolean,size:{type:String,validator:Ft},effect:{type:String,default:"light"},disabled:Boolean,clearable:Boolean,filterable:Boolean,allowCreate:Boolean,loading:Boolean,popperClass:{type:String,default:""},remote:Boolean,loadingText:String,noMatchText:String,noDataText:String,remoteMethod:Function,filterMethod:Function,multiple:Boolean,multipleLimit:{type:Number,default:0},placeholder:{type:String},defaultFirstOption:Boolean,reserveKeyword:{type:Boolean,default:!0},valueKey:{type:String,default:"value"},collapseTags:Boolean,collapseTagsTooltip:{type:Boolean,default:!1},teleported:_l.teleported,persistent:{type:Boolean,default:!0},clearIcon:{type:[String,Object],default:xl},fitInputWidth:{type:Boolean,default:!1},suffixIcon:{type:[String,Object],default:et},tagType:{...Ul.type,default:"info"},validateEvent:{type:Boolean,default:!0}},emits:[ue,zl,"remove-tag","clear","visible-change","focus","blur"],setup(e,l){const o=Q("select"),f=Q("input"),{t:i}=Ae(),p=Wt(e),{optionsArray:d,selectSize:g,readonly:v,handleResize:w,collapseTagSize:c,debouncedOnInputChange:k,debouncedQueryChange:r,deletePrevTag:a,deleteTag:n,deleteSelected:m,handleOptionSelect:O,scrollToOption:b,setSelected:$,resetInputHeight:A,managePlaceholder:de,showClose:J,selectDisabled:ce,iconComponent:D,iconReverse:pe,showNewOption:fe,emptyText:Y,toggleLastOptionHitState:ee,resetInputState:Ke,handleComposition:Z,onOptionCreate:oe,onOptionDestroy:Te,handleMenuEnter:Fe,handleFocus:he,blur:Ie,handleBlur:We,handleClearClick:Ne,handleClose:je,handleKeydownEscape:He,toggleMenu:Qe,selectOption:Ge,getValueKey:ve,navigateOptions:Xe,dropMenuVisible:Je,reference:me,input:Pe,tooltipRef:Ce,tags:Ye,selectWrapper:ae,scrollbar:Ze,queryChange:_e,groupQueryChange:xe}=Nt(e,p,l),{focus:Se}=It(me),{inputWidth:Oe,selected:Re,inputLength:el,filteredOptionsCount:Ve,visible:ll,softFocus:tl,selectedLabel:nl,hoverIndex:Be,query:De,inputHovering:ol,currentPlaceholder:ge,menuVisibleOnFocus:al,isOnComposition:Me,isSilentBlur:t,options:s,cachedOptions:C,optionsCount:E,prefixWidth:M,tagInMultiLine:se}=fl(p),ie=F(()=>{const U=[o.b()],be=u(g);return be&&U.push(o.m(be)),e.disabled&&U.push(o.m("disabled")),U}),le=F(()=>({maxWidth:`${u(Oe)-32}px`,width:"100%"}));gl(Ue,Le({props:e,options:s,optionsArray:d,cachedOptions:C,optionsCount:E,filteredOptionsCount:Ve,hoverIndex:Be,handleOptionSelect:O,onOptionCreate:oe,onOptionDestroy:Te,selectWrapper:ae,selected:Re,setSelected:$,queryChange:_e,groupQueryChange:xe})),ml(()=>{p.cachedPlaceHolder=ge.value=e.placeholder||i("el.select.placeholder"),e.multiple&&Array.isArray(e.modelValue)&&e.modelValue.length>0&&(ge.value=""),Bl(ae,w),e.remote&&e.multiple&&A(),K(()=>{const U=me.value&&me.value.$el;if(!!U&&(Oe.value=U.getBoundingClientRect().width,l.slots.prefix)){const be=U.querySelector(`.${f.e("prefix")}`);M.value=Math.max(be.getBoundingClientRect().width+5,30)}}),$()}),e.multiple&&!Array.isArray(e.modelValue)&&l.emit(ue,[]),!e.multiple&&Array.isArray(e.modelValue)&&l.emit(ue,"");const H=F(()=>{var U,be;return(be=(U=Ce.value)==null?void 0:U.popperRef)==null?void 0:be.contentRef});return{tagInMultiLine:se,prefixWidth:M,selectSize:g,readonly:v,handleResize:w,collapseTagSize:c,debouncedOnInputChange:k,debouncedQueryChange:r,deletePrevTag:a,deleteTag:n,deleteSelected:m,handleOptionSelect:O,scrollToOption:b,inputWidth:Oe,selected:Re,inputLength:el,filteredOptionsCount:Ve,visible:ll,softFocus:tl,selectedLabel:nl,hoverIndex:Be,query:De,inputHovering:ol,currentPlaceholder:ge,menuVisibleOnFocus:al,isOnComposition:Me,isSilentBlur:t,options:s,resetInputHeight:A,managePlaceholder:de,showClose:J,selectDisabled:ce,iconComponent:D,iconReverse:pe,showNewOption:fe,emptyText:Y,toggleLastOptionHitState:ee,resetInputState:Ke,handleComposition:Z,handleMenuEnter:Fe,handleFocus:he,blur:Ie,handleBlur:We,handleClearClick:Ne,handleClose:je,handleKeydownEscape:He,toggleMenu:Qe,selectOption:Ge,getValueKey:ve,navigateOptions:Xe,dropMenuVisible:Je,focus:Se,reference:me,input:Pe,tooltipRef:Ce,popperPaneRef:H,tags:Ye,selectWrapper:ae,scrollbar:Ze,wrapperKls:ie,selectTagsStyle:le,nsSelect:o}}}),Ht={class:"select-trigger"},Qt=["disabled","autocomplete"],Gt={style:{height:"100%",display:"flex","justify-content":"center","align-items":"center"}};function Xt(e,l,o,f,i,p){const d=re("el-tag"),g=re("el-tooltip"),v=re("el-icon"),w=re("el-input"),c=re("el-option"),k=re("el-scrollbar"),r=re("el-select-menu"),a=lt("click-outside");return we((y(),I("div",{ref:"selectWrapper",class:h(e.wrapperKls),onClick:l[22]||(l[22]=z((...n)=>e.toggleMenu&&e.toggleMenu(...n),["stop"]))},[L(g,{ref:"tooltipRef",visible:e.dropMenuVisible,placement:"bottom-start",teleported:e.teleported,"popper-class":[e.nsSelect.e("popper"),e.popperClass],"fallback-placements":["bottom-start","top-start","right","left"],effect:e.effect,pure:"",trigger:"click",transition:`${e.nsSelect.namespace.value}-zoom-in-top`,"stop-popper-mouse-event":!1,"gpu-acceleration":!1,persistent:e.persistent,onShow:e.handleMenuEnter},{default:S(()=>[R("div",Ht,[e.multiple?(y(),I("div",{key:0,ref:"tags",class:h(e.nsSelect.e("tags")),style:te(e.selectTagsStyle)},[e.collapseTags&&e.selected.length?(y(),I("span",{key:0,class:h([e.nsSelect.b("tags-wrapper"),{"has-prefix":e.prefixWidth&&e.selected.length}])},[L(d,{closable:!e.selectDisabled&&!e.selected[0].isDisabled,size:e.collapseTagSize,hit:e.selected[0].hitState,type:e.tagType,"disable-transitions":"",onClose:l[0]||(l[0]=n=>e.deleteTag(n,e.selected[0]))},{default:S(()=>[R("span",{class:h(e.nsSelect.e("tags-text")),style:te({maxWidth:e.inputWidth-123+"px"})},x(e.selected[0].currentLabel),7)]),_:1},8,["closable","size","hit","type"]),e.selected.length>1?(y(),P(d,{key:0,closable:!1,size:e.collapseTagSize,type:e.tagType,"disable-transitions":""},{default:S(()=>[e.collapseTagsTooltip?(y(),P(g,{key:0,disabled:e.dropMenuVisible,"fallback-placements":["bottom","top","right","left"],effect:e.effect,placement:"bottom",teleported:e.teleported},{default:S(()=>[R("span",{class:h(e.nsSelect.e("tags-text"))},"+ "+x(e.selected.length-1),3)]),content:S(()=>[R("div",{class:h(e.nsSelect.e("collapse-tags"))},[(y(!0),I(qe,null,rl(e.selected.slice(1),(n,m)=>(y(),I("div",{key:m,class:h(e.nsSelect.e("collapse-tag"))},[(y(),P(d,{key:e.getValueKey(n),class:"in-tooltip",closable:!e.selectDisabled&&!n.isDisabled,size:e.collapseTagSize,hit:n.hitState,type:e.tagType,"disable-transitions":"",style:{margin:"2px"},onClose:O=>e.deleteTag(O,n)},{default:S(()=>[R("span",{class:h(e.nsSelect.e("tags-text")),style:te({maxWidth:e.inputWidth-75+"px"})},x(n.currentLabel),7)]),_:2},1032,["closable","size","hit","type","onClose"]))],2))),128))],2)]),_:1},8,["disabled","effect","teleported"])):(y(),I("span",{key:1,class:h(e.nsSelect.e("tags-text"))},"+ "+x(e.selected.length-1),3))]),_:1},8,["size","type"])):T("v-if",!0)],2)):T("v-if",!0),T(" <div> "),e.collapseTags?T("v-if",!0):(y(),P(Rl,{key:1,onAfterLeave:e.resetInputHeight},{default:S(()=>[R("span",{class:h([e.nsSelect.b("tags-wrapper"),{"has-prefix":e.prefixWidth&&e.selected.length}])},[(y(!0),I(qe,null,rl(e.selected,n=>(y(),P(d,{key:e.getValueKey(n),closable:!e.selectDisabled&&!n.isDisabled,size:e.collapseTagSize,hit:n.hitState,type:e.tagType,"disable-transitions":"",onClose:m=>e.deleteTag(m,n)},{default:S(()=>[R("span",{class:h(e.nsSelect.e("tags-text")),style:te({maxWidth:e.inputWidth-75+"px"})},x(n.currentLabel),7)]),_:2},1032,["closable","size","hit","type","onClose"]))),128))],2)]),_:1},8,["onAfterLeave"])),T(" </div> "),e.filterable?we((y(),I("input",{key:2,ref:"input","onUpdate:modelValue":l[1]||(l[1]=n=>e.query=n),type:"text",class:h([e.nsSelect.e("input"),e.nsSelect.is(e.selectSize)]),disabled:e.selectDisabled,autocomplete:e.autocomplete,style:te({marginLeft:e.prefixWidth&&!e.selected.length||e.tagInMultiLine?`${e.prefixWidth}px`:"",flexGrow:1,width:`${e.inputLength/(e.inputWidth-32)}%`,maxWidth:`${e.inputWidth-42}px`}),onFocus:l[2]||(l[2]=(...n)=>e.handleFocus&&e.handleFocus(...n)),onBlur:l[3]||(l[3]=(...n)=>e.handleBlur&&e.handleBlur(...n)),onKeyup:l[4]||(l[4]=(...n)=>e.managePlaceholder&&e.managePlaceholder(...n)),onKeydown:[l[5]||(l[5]=(...n)=>e.resetInputState&&e.resetInputState(...n)),l[6]||(l[6]=W(z(n=>e.navigateOptions("next"),["prevent"]),["down"])),l[7]||(l[7]=W(z(n=>e.navigateOptions("prev"),["prevent"]),["up"])),l[8]||(l[8]=W((...n)=>e.handleKeydownEscape&&e.handleKeydownEscape(...n),["esc"])),l[9]||(l[9]=W(z((...n)=>e.selectOption&&e.selectOption(...n),["stop","prevent"]),["enter"])),l[10]||(l[10]=W((...n)=>e.deletePrevTag&&e.deletePrevTag(...n),["delete"])),l[11]||(l[11]=W(n=>e.visible=!1,["tab"]))],onCompositionstart:l[12]||(l[12]=(...n)=>e.handleComposition&&e.handleComposition(...n)),onCompositionupdate:l[13]||(l[13]=(...n)=>e.handleComposition&&e.handleComposition(...n)),onCompositionend:l[14]||(l[14]=(...n)=>e.handleComposition&&e.handleComposition(...n)),onInput:l[15]||(l[15]=(...n)=>e.debouncedQueryChange&&e.debouncedQueryChange(...n))},null,46,Qt)),[[tt,e.query]]):T("v-if",!0)],6)):T("v-if",!0),L(w,{id:e.id,ref:"reference",modelValue:e.selectedLabel,"onUpdate:modelValue":l[16]||(l[16]=n=>e.selectedLabel=n),type:"text",placeholder:e.currentPlaceholder,name:e.name,autocomplete:e.autocomplete,size:e.selectSize,disabled:e.selectDisabled,readonly:e.readonly,"validate-event":!1,class:h([e.nsSelect.is("focus",e.visible)]),tabindex:e.multiple&&e.filterable?-1:void 0,onFocus:e.handleFocus,onBlur:e.handleBlur,onInput:e.debouncedOnInputChange,onPaste:e.debouncedOnInputChange,onCompositionstart:e.handleComposition,onCompositionupdate:e.handleComposition,onCompositionend:e.handleComposition,onKeydown:[l[17]||(l[17]=W(z(n=>e.navigateOptions("next"),["stop","prevent"]),["down"])),l[18]||(l[18]=W(z(n=>e.navigateOptions("prev"),["stop","prevent"]),["up"])),W(z(e.selectOption,["stop","prevent"]),["enter"]),W(e.handleKeydownEscape,["esc"]),l[19]||(l[19]=W(n=>e.visible=!1,["tab"]))],onMouseenter:l[20]||(l[20]=n=>e.inputHovering=!0),onMouseleave:l[21]||(l[21]=n=>e.inputHovering=!1)},ul({suffix:S(()=>[e.iconComponent&&!e.showClose?(y(),P(v,{key:0,class:h([e.nsSelect.e("caret"),e.nsSelect.e("icon"),e.iconReverse])},{default:S(()=>[(y(),P(Sl(e.iconComponent)))]),_:1},8,["class"])):T("v-if",!0),e.showClose&&e.clearIcon?(y(),P(v,{key:1,class:h([e.nsSelect.e("caret"),e.nsSelect.e("icon")]),onClick:e.handleClearClick},{default:S(()=>[(y(),P(Sl(e.clearIcon)))]),_:1},8,["class","onClick"])):T("v-if",!0)]),_:2},[e.$slots.prefix?{name:"prefix",fn:S(()=>[R("div",Gt,[B(e.$slots,"prefix")])])}:void 0]),1032,["id","modelValue","placeholder","name","autocomplete","size","disabled","readonly","class","tabindex","onFocus","onBlur","onInput","onPaste","onCompositionstart","onCompositionupdate","onCompositionend","onKeydown"])])]),content:S(()=>[L(r,null,{default:S(()=>[we(L(k,{ref:"scrollbar",tag:"ul","wrap-class":e.nsSelect.be("dropdown","wrap"),"view-class":e.nsSelect.be("dropdown","list"),class:h([e.nsSelect.is("empty",!e.allowCreate&&Boolean(e.query)&&e.filteredOptionsCount===0)])},{default:S(()=>[e.showNewOption?(y(),P(c,{key:0,value:e.query,created:!0},null,8,["value"])):T("v-if",!0),B(e.$slots,"default")]),_:3},8,["wrap-class","view-class","class"]),[[vl,e.options.size>0&&!e.loading]]),e.emptyText&&(!e.allowCreate||e.loading||e.allowCreate&&e.options.size===0)?(y(),I(qe,{key:0},[e.$slots.empty?B(e.$slots,"empty",{key:0}):(y(),I("p",{key:1,class:h(e.nsSelect.be("dropdown","empty"))},x(e.emptyText),3))],64)):T("v-if",!0)]),_:3})]),_:3},8,["visible","teleported","popper-class","effect","transition","persistent","onShow"])],2)),[[a,e.handleClose,e.popperPaneRef]])}var Jt=ne(jt,[["render",Xt],["__file","/home/runner/work/element-plus/element-plus/packages/components/select/src/select.vue"]]);const Yt=X({name:"ElOptionGroup",componentName:"ElOptionGroup",props:{label:String,disabled:{type:Boolean,default:!1}},setup(e){const l=Q("select"),o=N(!0),f=pl(),i=N([]);gl(Kl,Le({...fl(e)}));const p=$e(Ue);ml(()=>{i.value=d(f.subTree)});const d=v=>{const w=[];return Array.isArray(v.children)&&v.children.forEach(c=>{var k;c.type&&c.type.name==="ElOption"&&c.component&&c.component.proxy?w.push(c.component.proxy):(k=c.children)!=null&&k.length&&w.push(...d(c))}),w},{groupQueryChange:g}=ze(p);return j(g,()=>{o.value=i.value.some(v=>v.visible===!0)}),{visible:o,ns:l}}});function Zt(e,l,o,f,i,p){return we((y(),I("ul",{class:h(e.ns.be("group","wrap"))},[R("li",{class:h(e.ns.be("group","title"))},x(e.label),3),R("li",null,[R("ul",{class:h(e.ns.b("group"))},[B(e.$slots,"default")],2)])],2)),[[vl,e.visible]])}var Wl=ne(Yt,[["render",Zt],["__file","/home/runner/work/element-plus/element-plus/packages/components/select/src/option-group.vue"]]);const _t=cl(Jt,{Option:hl,OptionGroup:Wl}),xt=Ml(hl);Ml(Wl);const en="ElUpload";class ln extends Error{constructor(l,o,f,i){super(l),this.name="UploadAjaxError",this.status=o,this.method=f,this.url=i}}function El(e,l,o){let f;return o.response?f=`${o.response.error||o.response}`:o.responseText?f=`${o.responseText}`:f=`fail to ${l.method} ${e} ${o.status}`,new ln(f,o.status,l.method,e)}function tn(e){const l=e.responseText||e.response;if(!l)return l;try{return JSON.parse(l)}catch{return l}}const nn=e=>{typeof XMLHttpRequest>"u"&&bl(en,"XMLHttpRequest is undefined");const l=new XMLHttpRequest,o=e.action;l.upload&&l.upload.addEventListener("progress",p=>{const d=p;d.percent=p.total>0?p.loaded/p.total*100:0,e.onProgress(d)});const f=new FormData;if(e.data)for(const[p,d]of Object.entries(e.data))Array.isArray(d)?f.append(p,...d):f.append(p,d);f.append(e.filename,e.file,e.file.name),l.addEventListener("error",()=>{e.onError(El(o,e,l))}),l.addEventListener("load",()=>{if(l.status<200||l.status>=300)return e.onError(El(o,e,l));e.onSuccess(tn(l))}),l.open(e.method,o,!0),e.withCredentials&&"withCredentials"in l&&(l.withCredentials=!0);const i=e.headers||{};if(i instanceof Headers)i.forEach((p,d)=>l.setRequestHeader(d,p));else for(const[p,d]of Object.entries(i))nt(d)||l.setRequestHeader(p,String(d));return l.send(f),l},Nl=["text","picture","picture-card"];let on=1;const jl=()=>Date.now()+on++,Hl=ye({action:{type:String,default:"#"},headers:{type:V(Object)},method:{type:String,default:"post"},data:{type:Object,default:()=>dl({})},multiple:{type:Boolean,default:!1},name:{type:String,default:"file"},drag:{type:Boolean,default:!1},withCredentials:Boolean,showFileList:{type:Boolean,default:!0},accept:{type:String,default:""},type:{type:String,default:"select"},fileList:{type:V(Array),default:()=>dl([])},autoUpload:{type:Boolean,default:!0},listType:{type:String,values:Nl,default:"text"},httpRequest:{type:V(Function),default:nn},disabled:Boolean,limit:Number}),an=ye({...Hl,beforeUpload:{type:V(Function),default:q},beforeRemove:{type:V(Function)},onRemove:{type:V(Function),default:q},onChange:{type:V(Function),default:q},onPreview:{type:V(Function),default:q},onSuccess:{type:V(Function),default:q},onProgress:{type:V(Function),default:q},onError:{type:V(Function),default:q},onExceed:{type:V(Function),default:q}}),sn=ye({files:{type:V(Array),default:()=>dl([])},disabled:{type:Boolean,default:!1},handlePreview:{type:V(Function),default:q},listType:{type:String,values:Nl,default:"text"}}),rn={remove:e=>!!e},un=["onKeydown"],dn=["src"],cn=["onClick"],pn=["onClick"],fn=["onClick"],vn={name:"ElUploadList"},mn=X({...vn,props:sn,emits:rn,setup(e,{emit:l}){const o=e,{t:f}=Ae(),i=Q("upload"),p=Q("icon"),d=Q("list"),g=N(!1),v=c=>{o.handlePreview(c)},w=c=>{l("remove",c)};return(c,k)=>(y(),P(ut,{tag:"ul",class:h([u(i).b("list"),u(i).bm("list",c.listType),u(i).is("disabled",c.disabled)]),name:u(d).b()},{default:S(()=>[(y(!0),I(qe,null,rl(c.files,r=>(y(),I("li",{key:r.uid||r.name,class:h([u(i).be("list","item"),u(i).is(r.status),{focusing:g.value}]),tabindex:"0",onKeydown:W(a=>!c.disabled&&w(r),["delete"]),onFocus:k[0]||(k[0]=a=>g.value=!0),onBlur:k[1]||(k[1]=a=>g.value=!1),onClick:k[2]||(k[2]=a=>g.value=!1)},[B(c.$slots,"default",{file:r},()=>[c.listType==="picture"||r.status!=="uploading"&&c.listType==="picture-card"?(y(),I("img",{key:0,class:h(u(i).be("list","item-thumbnail")),src:r.url,alt:""},null,10,dn)):T("v-if",!0),c.listType!=="picture"&&(r.status==="uploading"||c.listType!=="picture-card")?(y(),I("div",{key:1,class:h(u(i).be("list","item-info"))},[R("a",{class:h(u(i).be("list","item-name")),onClick:z(a=>v(r),["prevent"])},[L(u(_),{class:h(u(p).m("document"))},{default:S(()=>[L(u(ot))]),_:1},8,["class"]),R("span",{class:h(u(i).be("list","item-file-name"))},x(r.name),3)],10,cn),r.status==="uploading"?(y(),P(u(kt),{key:0,type:c.listType==="picture-card"?"circle":"line","stroke-width":c.listType==="picture-card"?6:2,percentage:Number(r.percentage),style:te(c.listType==="picture-card"?"":"margin-top: 0.5rem")},null,8,["type","stroke-width","percentage","style"])):T("v-if",!0)],2)):T("v-if",!0),R("label",{class:h(u(i).be("list","item-status-label"))},[c.listType==="text"?(y(),P(u(_),{key:0,class:h([u(p).m("upload-success"),u(p).m("circle-check")])},{default:S(()=>[L(u(at))]),_:1},8,["class"])):["picture-card","picture"].includes(c.listType)?(y(),P(u(_),{key:1,class:h([u(p).m("upload-success"),u(p).m("check")])},{default:S(()=>[L(u(st))]),_:1},8,["class"])):T("v-if",!0)],2),c.disabled?T("v-if",!0):(y(),P(u(_),{key:2,class:h(u(p).m("close")),onClick:a=>w(r)},{default:S(()=>[L(u(il))]),_:2},1032,["class","onClick"])),T(" Due to close btn only appears when li gets focused disappears after li gets blurred, thus keyboard navigation can never reach close btn"),T(" This is a bug which needs to be fixed "),T(" TODO: Fix the incorrect navigation interaction "),c.disabled?T("v-if",!0):(y(),I("i",{key:3,class:h(u(p).m("close-tip"))},x(u(f)("el.upload.deleteTip")),3)),c.listType==="picture-card"?(y(),I("span",{key:4,class:h(u(i).be("list","item-actions"))},[R("span",{class:h(u(i).be("list","item-preview")),onClick:a=>c.handlePreview(r)},[L(u(_),{class:h(u(p).m("zoom-in"))},{default:S(()=>[L(u(it))]),_:1},8,["class"])],10,pn),c.disabled?T("v-if",!0):(y(),I("span",{key:0,class:h(u(i).be("list","item-delete")),onClick:a=>w(r)},[L(u(_),{class:h(u(p).m("delete"))},{default:S(()=>[L(u(rt))]),_:1},8,["class"])],10,fn))],2)):T("v-if",!0)])],42,un))),128)),B(c.$slots,"append")]),_:3},8,["class","name"]))}});var Ll=ne(mn,[["__file","/home/runner/work/element-plus/element-plus/packages/components/upload/src/upload-list.vue"]]);const gn=ye({disabled:{type:Boolean,default:!1}}),bn={file:e=>dt(e)},yn=["onDrop","onDragover"],hn={name:"ElUploadDrag"},Cn=X({...hn,props:gn,emits:bn,setup(e,{emit:l}){const o=e,f="ElUploadDrag",i=$e(Al);i||bl(f,"usage: <el-upload><el-upload-dragger /></el-upload>");const p=Q("upload"),d=N(!1),g=w=>{if(o.disabled)return;d.value=!1;const c=Array.from(w.dataTransfer.files),k=i.accept.value;if(!k){l("file",c);return}const r=c.filter(a=>{const{type:n,name:m}=a,O=m.includes(".")?`.${m.split(".").pop()}`:"",b=n.replace(/\/.*$/,"");return k.split(",").map($=>$.trim()).filter($=>$).some($=>$.startsWith(".")?O===$:/\/\*$/.test($)?b===$.replace(/\/\*$/,""):/^[^/]+\/[^/]+$/.test($)?n===$:!1)});l("file",r)},v=()=>{o.disabled||(d.value=!0)};return(w,c)=>(y(),I("div",{class:h([u(p).b("dragger"),u(p).is("dragover",d.value)]),onDrop:z(g,["prevent"]),onDragover:z(v,["prevent"]),onDragleave:c[0]||(c[0]=z(k=>d.value=!1,["prevent"]))},[B(w.$slots,"default")],42,yn))}});var Sn=ne(Cn,[["__file","/home/runner/work/element-plus/element-plus/packages/components/upload/src/upload-dragger.vue"]]);const On=ye({...Hl,beforeUpload:{type:V(Function),default:q},onRemove:{type:V(Function),default:q},onStart:{type:V(Function),default:q},onSuccess:{type:V(Function),default:q},onProgress:{type:V(Function),default:q},onError:{type:V(Function),default:q},onExceed:{type:V(Function),default:q}}),kn=["onKeydown"],wn=["name","multiple","accept"],$n={name:"ElUploadContent",inheritAttrs:!1},En=X({...$n,props:On,setup(e,{expose:l}){const o=e,f=Q("upload"),i=Ee({}),p=Ee(),d=a=>{if(a.length===0)return;const{autoUpload:n,limit:m,fileList:O,multiple:b,onStart:$,onExceed:A}=o;if(m&&O.length+a.length>m){A(a,O);return}b||(a=a.slice(0,1));for(const de of a){const J=de;J.uid=jl(),$(J),n&&g(J)}},g=async a=>{if(p.value.value="",!o.beforeUpload)return v(a);let n;try{n=await o.beforeUpload(a)}catch{n=!1}if(n===!1){o.onRemove(a);return}let m=a;n instanceof Blob&&(n instanceof File?m=n:m=new File([n],a.name,{type:a.type})),v(Object.assign(m,{uid:a.uid}))},v=a=>{const{headers:n,data:m,method:O,withCredentials:b,name:$,action:A,onProgress:de,onSuccess:J,onError:ce,httpRequest:D}=o,{uid:pe}=a,fe={headers:n||{},withCredentials:b,file:a,data:m,method:O,filename:$,action:A,onProgress:ee=>{de(ee,a)},onSuccess:ee=>{J(ee,a),delete i.value[pe]},onError:ee=>{ce(ee,a),delete i.value[pe]}},Y=D(fe);i.value[pe]=Y,Y instanceof Promise&&Y.then(fe.onSuccess,fe.onError)},w=a=>{const n=a.target.files;!n||d(Array.from(n))},c=()=>{o.disabled||(p.value.value="",p.value.click())},k=()=>{c()};return l({abort:a=>{ct(i.value).filter(a?([m])=>String(a.uid)===m:()=>!0).forEach(([m,O])=>{O instanceof XMLHttpRequest&&O.abort(),delete i.value[m]})},upload:g}),(a,n)=>(y(),I("div",{class:h([u(f).b(),u(f).m(a.listType),u(f).is("drag",a.drag)]),tabindex:"0",onClick:c,onKeydown:W(z(k,["self"]),["enter","space"])},[a.drag?(y(),P(Sn,{key:0,disabled:a.disabled,onFile:d},{default:S(()=>[B(a.$slots,"default")]),_:3},8,["disabled"])):B(a.$slots,"default",{key:1}),R("input",{ref_key:"inputRef",ref:p,class:h(u(f).e("input")),name:a.name,multiple:a.multiple,accept:a.accept,type:"file",onChange:w,onClick:n[0]||(n[0]=z(()=>{},["stop"]))},null,42,wn)],42,kn))}});var Tl=ne(En,[["__file","/home/runner/work/element-plus/element-plus/packages/components/upload/src/upload-content.vue"]]);const Fl="ElUpload",Ln=e=>{var l;(l=e.url)!=null&&l.startsWith("blob:")&&URL.revokeObjectURL(e.url)},Tn=(e,l)=>{const o=pt(e,"fileList",void 0,{passive:!0}),f=r=>o.value.find(a=>a.uid===r.uid);function i(r){var a;(a=l.value)==null||a.abort(r)}function p(r=["ready","uploading","success","fail"]){o.value=o.value.filter(a=>!r.includes(a.status))}const d=(r,a)=>{const n=f(a);!n||(console.error(r),n.status="fail",o.value.splice(o.value.indexOf(n),1),e.onError(r,n,o.value),e.onChange(n,o.value))},g=(r,a)=>{const n=f(a);!n||(e.onProgress(r,n,o.value),n.status="uploading",n.percentage=Math.round(r.percent))},v=(r,a)=>{const n=f(a);!n||(n.status="success",n.response=r,e.onSuccess(r,n,o.value),e.onChange(n,o.value))},w=r=>{const a={name:r.name,percentage:0,status:"ready",size:r.size,raw:r,uid:r.uid};if(e.listType==="picture-card"||e.listType==="picture")try{a.url=URL.createObjectURL(r)}catch(n){Dl(Fl,n.message),e.onError(n,a,o.value)}o.value=[...o.value,a],e.onChange(a,o.value)},c=async r=>{const a=r instanceof File?f(r):r;a||bl(Fl,"file to be removed not found");const n=m=>{i(m);const O=o.value;O.splice(O.indexOf(m),1),e.onRemove(m,O),Ln(m)};e.beforeRemove?await e.beforeRemove(a,o.value)!==!1&&n(a):n(a)};function k(){o.value.filter(({status:r})=>r==="ready").forEach(({raw:r})=>{var a;return r&&((a=l.value)==null?void 0:a.upload(r))})}return j(()=>e.listType,r=>{r!=="picture-card"&&r!=="picture"||(o.value=o.value.map(a=>{const{raw:n,url:m}=a;if(!m&&n)try{a.url=URL.createObjectURL(n)}catch(O){e.onError(O,a,o.value)}return a}))}),j(o,r=>{for(const a of r)a.uid||(a.uid=jl()),a.status||(a.status="success")},{immediate:!0,deep:!0}),{uploadFiles:o,abort:i,clearFiles:p,handleError:d,handleProgress:g,handleStart:w,handleSuccess:v,handleRemove:c,submit:k}},Fn={name:"ElUpload"},In=X({...Fn,props:an,setup(e,{expose:l}){const o=e,f=ft(),i=vt(),p=Ee(),{abort:d,submit:g,clearFiles:v,uploadFiles:w,handleStart:c,handleError:k,handleRemove:r,handleSuccess:a,handleProgress:n}=Tn(o,p),m=F(()=>o.listType==="picture-card"),O=F(()=>({...o,onStart:c,onProgress:n,onSuccess:a,onError:k,onRemove:r}));return Vl(()=>{w.value.forEach(({url:b})=>{b!=null&&b.startsWith("blob:")&&URL.revokeObjectURL(b)})}),gl(Al,{accept:mt(o,"accept")}),l({abort:d,submit:g,clearFiles:v,handleStart:c,handleRemove:r}),(b,$)=>(y(),I("div",null,[u(m)&&b.showFileList?(y(),P(Ll,{key:0,disabled:u(i),"list-type":b.listType,files:u(w),"handle-preview":b.onPreview,onRemove:u(r)},ul({append:S(()=>[b.listType==="picture-card"?(y(),P(Tl,Ol({key:0,ref_key:"uploadRef",ref:p},u(O)),{default:S(()=>[u(f).trigger?B(b.$slots,"trigger",{key:0}):T("v-if",!0),!u(f).trigger&&u(f).default?B(b.$slots,"default",{key:1}):T("v-if",!0)]),_:3},16)):T("v-if",!0)]),_:2},[b.$slots.file?{name:"default",fn:S(({file:A})=>[B(b.$slots,"file",{file:A})])}:void 0]),1032,["disabled","list-type","files","handle-preview","onRemove"])):T("v-if",!0),b.listType!=="picture-card"?(y(),P(Tl,Ol({key:1,ref_key:"uploadRef",ref:p},u(O)),{default:S(()=>[u(f).trigger?B(b.$slots,"trigger",{key:0}):T("v-if",!0),!u(f).trigger&&u(f).default?B(b.$slots,"default",{key:1}):T("v-if",!0)]),_:3},16)):T("v-if",!0),b.$slots.trigger?B(b.$slots,"default",{key:2}):T("v-if",!0),B(b.$slots,"tip"),!u(m)&&b.showFileList?(y(),P(Ll,{key:3,disabled:u(i),"list-type":b.listType,files:u(w),"handle-preview":b.onPreview,onRemove:u(r)},ul({_:2},[b.$slots.file?{name:"default",fn:S(({file:A})=>[B(b.$slots,"file",{file:A})])}:void 0]),1032,["disabled","list-type","files","handle-preview","onRemove"])):T("v-if",!0)]))}});var Pn=ne(In,[["__file","/home/runner/work/element-plus/element-plus/packages/components/upload/src/upload.vue"]]);const Rn=cl(Pn);const Vn=e=>(bt("data-v-95c53dd1"),e=e(),yt(),e),Bn={class:"container"},Dn={class:"form-box"},Mn=Vn(()=>R("div",{class:"el-upload__text"},[yl(" \u5C06\u6587\u4EF6\u62D6\u5230\u6B64\u5904\uFF0C\u6216 "),R("em",null,"\u70B9\u51FB\u4E0A\u4F20")],-1)),qn=yl("\u8868\u5355\u63D0\u4EA4"),zn=yl("\u91CD\u7F6E\u8868\u5355"),An=X({name:"baseform"}),Un=X({...An,setup(e){const l=g=>{console.log(g)},o={name:[{required:!0,message:"\u8BF7\u8F93\u5165\u6587\u4EF6\u5907\u6CE8",trigger:"blur"}],ip:[{required:!0,message:"\u8BF7\u8F93\u5165IPv4\u7684\u683C\u5F0F",trigger:"blur"}]},f=N(),i=Le({name:"",ip:"",region:"",desc:""}),p=g=>{!g||g.validate(v=>{if(v)console.log(i),Et.success("\u63D0\u4EA4\u6210\u529F\uFF01");else return!1})},d=g=>{!g||g.resetFields()};return(g,v)=>{const w=ql,c=St,k=xt,r=_t,a=re("upload-filled"),n=_,m=Rn,O=gt,b=Ot;return y(),I("div",Bn,[R("div",Dn,[L(b,{ref_key:"formRef",ref:f,rules:o,model:i,"label-width":"80px"},{default:S(()=>[L(c,{label:"\u6587\u4EF6\u540D\u79F0",prop:"name"},{default:S(()=>[L(w,{modelValue:i.name,"onUpdate:modelValue":v[0]||(v[0]=$=>i.name=$)},null,8,["modelValue"])]),_:1}),L(c,{label:"\u63A5\u6536\u5730\u5740",prop:"ip"},{default:S(()=>[L(w,{modelValue:i.ip,"onUpdate:modelValue":v[1]||(v[1]=$=>i.ip=$)},null,8,["modelValue"])]),_:1}),L(c,{label:"\u6587\u4EF6\u7C7B\u578B",prop:"region"},{default:S(()=>[L(r,{modelValue:i.region,"onUpdate:modelValue":v[2]||(v[2]=$=>i.region=$),placeholder:"\u8BF7\u9009\u62E9"},{default:S(()=>[L(k,{key:"txt",label:"txt",value:"txt"}),L(k,{key:"jpg",label:"jpg",value:"jpg"}),L(k,{key:"mp4",label:"mp4",value:"mp4"})]),_:1},8,["modelValue"])]),_:1}),L(c,{label:"\u5907\u6CE8",prop:"desc"},{default:S(()=>[L(w,{type:"textarea",rows:"5",modelValue:i.desc,"onUpdate:modelValue":v[3]||(v[3]=$=>i.desc=$)},null,8,["modelValue"])]),_:1}),L(c,{label:"\u4E0A\u4F20\u6587\u4EF6",prop:"desc"},{default:S(()=>[L(m,{class:"upload-demo",drag:"",action:"http://jsonplaceholder.typicode.com/api/posts/",multiple:"","on-change":l},{default:S(()=>[L(n,{class:"el-icon--upload"},{default:S(()=>[L(a)]),_:1}),Mn]),_:1})]),_:1}),L(c,null,{default:S(()=>[L(O,{type:"primary",onClick:v[4]||(v[4]=$=>p(f.value))},{default:S(()=>[qn]),_:1}),L(O,{onClick:v[5]||(v[5]=$=>d(f.value))},{default:S(()=>[zn]),_:1})]),_:1})]),_:1},8,["model"])])])}}});const Xn=ht(Un,[["__scopeId","data-v-95c53dd1"]]);export{Xn as default};
